"use strict";(globalThis["webpackChunkpharmaplus"]=globalThis["webpackChunkpharmaplus"]||[]).push([[979],{2979:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var o=a(9835),s=a(6970);const l={class:"fullscreen",style:{background:"radial-gradient(\r\n        circle at 0% 125%,\r\n        rgb(91, 200, 180),\r\n        rgb(64, 145, 123)\r\n      )"}},r={class:"text-primary text-center q-pa-lg"},i={class:"fixed-bottom-right"};function n(e,t,a,n,d,m){const u=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),p=(0,o.up)("q-separator"),g=(0,o.up)("q-card"),h=(0,o.up)("q-tab"),b=(0,o.up)("q-tabs"),w=(0,o.up)("LoginForm"),f=(0,o.up)("q-tab-panel"),v=(0,o.up)("RegisterForm"),q=(0,o.up)("q-tab-panels"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o.Wm)(g,{class:"absolute-center q-pa-lg",style:{width:"100vw","max-width":"560px",height:"31dvh","border-radius":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",to:"/",icon:"arrow_back",class:"absolute-top-left q-mt-lg q-ml-sm"}),(0,o._)("h4",r,[(0,o._)("img",{style:{filter:"invert(100%) sepia(100%) saturate(0%) hue-rotate(230deg)\r\n              brightness(50%)"},class:(0,s.C_)(["q-mt-sm colored-img absolute-center",{"lg-height":e.$q.screen.gt.sm,"sm-height":e.$q.screen.lt.sm}]),src:"/pharmapluslogo.png",alt:"Pharma Plus Logo"},null,2)]),(0,o._)("div",i,[(0,o.Wm)(c,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",onClick:t[0]||(t[0]=e=>n.open("bottom","LoginForm"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1})])),_:1}),(0,o.Wm)(p,{vertical:""}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",onClick:t[1]||(t[1]=e=>n.open("bottom","RegisterForm"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Register")])),_:1})])),_:1})])),_:1})])])),_:1})]),(0,o.Wm)(y,{modelValue:n.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>n.dialog=e),position:n.position},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{width:"100vw",height:"60dvh","border-radius":"40px"},maximized:"",class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:n.tab,"onUpdate:modelValue":t[2]||(t[2]=e=>n.tab=e),"indicator-color":"teal",dense:"",align:"justify","switch-indicator":"","slide-transition":""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"text-primary",name:"LoginForm",label:"Sign In"}),(0,o.Wm)(h,{class:"text-primary",name:"RegisterForm",label:"Sign Up"})])),_:1},8,["modelValue"]),(0,o.Wm)(q,{modelValue:n.tab,"onUpdate:modelValue":t[3]||(t[3]=e=>n.tab=e),animated:"","slide-transition":""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{name:"LoginForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1}),(0,o.Wm)(f,{name:"RegisterForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","position"])],64)}var d=a(499),m=a(1957);function u(e,t,a,s,l,r){const i=(0,o.up)("q-input"),n=(0,o.up)("q-btn"),d=(0,o.up)("q-form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(d,{onSubmit:(0,m.iM)(r.login,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:l.email,"onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),label:"Email",dense:e.dense},null,8,["modelValue","dense"]),(0,o.Wm)(i,{modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),label:"Password",dense:e.dense,type:"password"},null,8,["modelValue","dense"]),(0,o.Wm)(n,{unelevated:"",rounded:"",color:"primary",label:"Login",class:"full-width q-ma-lg",outline:"",type:"submit"})])),_:1},8,["onSubmit"]),(0,o.Wm)(n,{unelevated:"",rounded:"",outline:"",color:"secondary",onClick:t[2]||(t[2]=t=>e.$q.fullscreen.toggle()),icon:e.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",class:"float-right"},null,8,["icon"])],64)}a(2879);var c=a(1569),p=a(6827);const g={data(){return{email:"",password:"",errorMsg:""}},methods:{async login(){if(""!==this.password.trim())try{const e=await c.api.post("/login",{email:this.email,password:this.password});if(console.log(e.data),"error"===e.data.msg)this.errorMsg="Invalid email or password";else{const t=e.data.token,a=e.data.user_role;console.log(e.data),sessionStorage.setItem("token",t),sessionStorage.setItem("user_role",a),"admin"===a?(this.$router.push("/dashboard"),p.Z.create({message:"Login General Admin successfully!",color:"teal",position:"bottom",timeout:3e3})):"cashier"===a?(this.$router.push("/POS"),p.Z.create({message:"Login as Cashier successfully!",color:"teal",position:"bottom",timeout:3e3})):"branch_admin"===a&&(this.$router.push("/Branch_dashboard"),p.Z.create({message:"Login as Branch Admin successfully!",color:"teal",position:"bottom",timeout:3e3}))}}catch(e){console.error("Error during login:",e),p.Z.create({message:"Error during login. Please try again.",color:"negative",position:"bottom",timeout:3e3})}else this.errorMsg="Password cannot be empty"}}};var h=a(1639),b=a(8326),w=a(6611),f=a(8879),v=a(9984),q=a.n(v);const y=(0,h.Z)(g,[["render",u]]),W=y;q()(g,"components",{QForm:b.Z,QInput:w.Z,QBtn:f.Z});const _={key:0},V={key:1};function C(e,t,a,s,l,r){const i=(0,o.up)("q-input"),n=(0,o.up)("q-btn"),d=(0,o.up)("q-form");return(0,o.wg)(),(0,o.j4)(d,{onSubmit:(0,m.iM)(r.register,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{required:"",modelValue:l.invitationCode,"onUpdate:modelValue":t[0]||(t[0]=e=>l.invitationCode=e),label:"Invitation Code"},null,8,["modelValue"]),(0,o.Wm)(i,{required:"",modelValue:l.email,"onUpdate:modelValue":t[1]||(t[1]=e=>l.email=e),label:"Email"},null,8,["modelValue"]),(0,o.Wm)(i,{required:"",modelValue:l.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.password=e),label:"Password",type:"password"},null,8,["modelValue"]),(0,o.Wm)(i,{required:"",modelValue:l.passwordConfirm,"onUpdate:modelValue":t[3]||(t[3]=e=>l.passwordConfirm=e),label:"Confirm Password",type:"password"},null,8,["modelValue"]),(0,o.Wm)(n,{unelevated:"",rounded:"",color:"primary",label:"Register",class:"full-width q-ma-lg",outline:"",type:"submit"}),"passwordMismatch"===l.message?((0,o.wg)(),(0,o.iD)("div",_,"Passwords do not match")):(0,o.kq)("",!0),"failed"===l.message?((0,o.wg)(),(0,o.iD)("div",V,"Registration failed")):(0,o.kq)("",!0)])),_:1},8,["onSubmit"])}const k={data(){return{invitationCode:"",email:"",password:"",passwordConfirm:"",message:null}},methods:{async register(){try{const e=await c.api.post("/register",{invitationCode:this.invitationCode,email:this.email,password:this.password});if(this.message=e.data.msg,"okay"===e.data.msg){const t=e.data.token,a=e.data.user_role;sessionStorage.setItem("token",t),sessionStorage.setItem("user_role",a),console.log("User Role:",a),this.redirectBasedOnInvitationCode(this.invitationCode),p.Z.create({message:"Registered successfully!",color:"teal",position:"bottom",timeout:3e3})}}catch(e){console.error("Registration failed:",e),this.message="failed"}},redirectBasedOnInvitationCode(e){const t=e.substring(0,2).toUpperCase();switch(t){case"CS":this.$router.push("/POS");break;case"BA":this.$router.push("/Branch_dashboard");break;default:this.$router.push("/");break}}}},Z=(0,h.Z)(k,[["render",C]]),Q=Z;q()(k,"components",{QForm:b.Z,QInput:w.Z,QBtn:f.Z});const S={components:{LoginForm:W,RegisterForm:Q},setup(){const e=(0,d.iH)(!1),t=(0,d.iH)("bottom"),a=(0,d.iH)("LoginForm");return{tab:a,dialog:e,position:t,open(o,s){t.value=o,a.value=s,e.value=!0}}}};var U=a(4458),F=a(3190),L=a(926),P=a(2074),x=a(7817),I=a(7661),R=a(9800),$=a(4106);const B=(0,h.Z)(S,[["render",n]]),M=B;q()(S,"components",{QCard:U.Z,QBtn:f.Z,QCardSection:F.Z,QSeparator:L.Z,QDialog:P.Z,QTabs:x.Z,QTab:I.Z,QTabPanels:R.Z,QTabPanel:$.Z})}}]);