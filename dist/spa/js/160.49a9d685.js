"use strict";(globalThis["webpackChunkpharmaplus"]=globalThis["webpackChunkpharmaplus"]||[]).push([[160],{9160:(t,e,o)=>{o.r(e),o.d(e,{default:()=>q});var l=o(9835),a=o(6970);const r={class:"fit row wrap justify-center items-center content-center"};function s(t,e,o,s,i,n){const c=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),u=(0,l.up)("q-chip"),p=(0,l.up)("q-td"),m=(0,l.up)("q-tooltip"),f=(0,l.up)("q-btn"),h=(0,l.up)("q-table"),g=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(g,{flat:"",bordered:!t.$q.dark.isActive,class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{rows:s.filteredProducts,columns:i.columns,"row-key":"product_id",title:"Product List",class:"q-pa-md q-mb-lg q-mx-lg",rowsPerPage:"0","rows-per-page-label":"Records per page :","rows-per-page-options":[10],filter:s.filter},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(d,{dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":e[0]||(e[0]=t=>s.filter=t),placeholder:"Search",class:"q-mt-lg"},{append:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-status":(0,l.w5)((t=>[(0,l.Wm)(p,{props:t},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(u,{color:s.getStatusColor(t.row.status),"text-color":"white",outline:"",class:"q-unselectable"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.row.status),1)])),_:2},1032,["color"])])])),_:2},1032,["props"])])),"body-cell-action":(0,l.w5)((t=>[(0,l.Wm)(p,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{icon:"history",onClick:e=>s.viewAuditHistory(t.row),class:"q-mr-xs",flat:"",color:"cyan-9",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Uk)(" history ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(f,{icon:"autorenew",onClick:e=>s.restockproduct(t.row),class:"q-mr-xs",flat:"",color:"cyan-9",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Uk)(" restock ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(f,{icon:"edit",onClick:e=>s.editProduct(t.row),class:"q-mr-xs",flat:"",color:"cyan-9",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Uk)(" edit ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(f,{icon:"delete",onClick:e=>s.deleteProduct(t.row),class:"q-mr-xs",flat:"",color:"cyan-9",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Uk)(" delete ")])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1},8,["bordered"])])}o(2879);var i=o(499),n=o(1569),c=(o(6827),o(8339));const d={setup(){const t=(0,i.iH)(""),e=(0,i.iH)([]),o=(0,c.tv)(),l=t=>{console.log("Edit product:",t)},a=t=>{console.log("Delete product:",t)},r=t=>{console.log("Restock:",t);const e=sessionStorage.getItem("token");o.push(`/branch/restock/${e}/${t.product_id}`)},s=t=>{console.log("View audit history:",t);const e=sessionStorage.getItem("token");o.push(`/branch/productAudit/${e}/${t.product_id}`)},n=t=>"available"===t?"cyan-9":"grey";return{filter:t,filteredProducts:e,editProduct:l,deleteProduct:a,restockproduct:r,viewAuditHistory:s,getStatusColor:n}},data(){return{productList:[],columns:[{name:"index",label:"#",align:"center",field:"index",sortable:!0},{name:"upc",label:"UPC",align:"left",field:"upc",sortable:!0},{name:"product_name",label:"Product Name",align:"left",field:"product_name",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"category",label:"Category",align:"left",field:"category",sortable:!0},{name:"price",label:"Price",align:"left",field:"price",sortable:!0},{name:"quantity",label:"Quantity",align:"left",field:"quantity",sortable:!0},{name:"branch_id",label:"Branch ID",align:"left",field:"branch_id",sortable:!0},{name:"status",label:"Status",align:"center",field:"status",sortable:!0},{name:"action",label:"Action",align:"center",field:"action"}]}},methods:{async fetchProductList(){const t=sessionStorage.getItem("token"),e=await n.api.get(`/ProdList/${t}`);this.productList=e.data,this.productList.forEach(((t,e)=>{t.index=e+1})),this.filteredProducts=this.productList},startPolling(){this.fetchProductList(),this.pollingTimer=setInterval((()=>{this.fetchProductList()}),1e3)},stopPolling(){clearInterval(this.pollingTimer)}},mounted(){this.startPolling()},beforeDestroy(){this.stopPolling()}};var u=o(1639),p=o(4458),m=o(5950),f=o(6611),h=o(2857),g=o(7220),w=o(7691),b=o(8879),k=o(6858),y=o(9984),_=o.n(y);const P=(0,u.Z)(d,[["render",s],["__scopeId","data-v-731edc7a"]]),q=P;_()(d,"components",{QCard:p.Z,QTable:m.Z,QInput:f.Z,QIcon:h.Z,QTd:g.Z,QChip:w.Z,QBtn:b.Z,QTooltip:k.Z})}}]);