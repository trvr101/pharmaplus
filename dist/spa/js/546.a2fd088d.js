"use strict";(globalThis["webpackChunkpharmaplus"]=globalThis["webpackChunkpharmaplus"]||[]).push([[546],{3546:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var a=t(9835),o=t(6970);const r={class:"row"},i={class:"q-pa-lg"},n={class:"q-pa-lg"},s={class:"q-pa-lg"},d={class:"q-table"},c=["onClick"];function u(e,l,t,u,m,h){const p=(0,a.up)("q-select"),f=(0,a.up)("q-card"),g=(0,a.up)("q-card-title"),b=(0,a.up)("q-card-section"),w=(0,a.up)("q-btn"),y=(0,a.up)("q-card-actions"),_=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",r,[(0,a._)("div",{class:(0,o.C_)({"col-4":e.$q.screen.gt.sm,"col-12":e.$q.screen.lt.sm})},[(0,a.Wm)(f,{class:"my-card my-card-inventory",flat:"",bordered:!e.$q.dark.isActive},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(p,{label:"Category",color:"teal",modelValue:e.categoryFilter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.categoryFilter=l),options:e.categoryOptions,"use-input":"","input-debounce":"0",onFilter:e.filterFn,style:{width:"250px"},class:"full-width"},null,8,["modelValue","options","onFilter"])])])),_:1},8,["bordered"])],2),(0,a._)("div",{class:(0,o.C_)({"col-4":e.$q.screen.gt.sm,"col-12":e.$q.screen.lt.sm})},[(0,a.Wm)(f,{class:"my-card my-card-inventory",flat:"",bordered:!e.$q.dark.isActive},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(p,{label:"Branch",color:"teal",modelValue:e.branchFilter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.branchFilter=l),options:e.branchOptions,"use-input":"","input-debounce":"0",onFilter:e.filterFn,style:{width:"250px"},class:"full-width"},null,8,["modelValue","options","onFilter"])])])),_:1},8,["bordered"])],2),(0,a._)("div",{class:(0,o.C_)({"col-4":e.$q.screen.gt.sm,"col-12":e.$q.screen.lt.sm})},[(0,a.Wm)(f,{class:"my-card my-card-inventory",flat:"",bordered:!e.$q.dark.isActive},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(p,{label:"Status",color:"teal",modelValue:e.statusFilter,"onUpdate:modelValue":l[2]||(l[2]=l=>e.statusFilter=l),options:e.statusOptions,"use-input":"","input-debounce":"0",onFilter:e.filterFn,style:{width:"250px"},class:"full-width"},null,8,["modelValue","options","onFilter"])])])),_:1},8,["bordered"])],2)]),(0,a.Wm)(f,{class:"my-card my-card-inventory",flat:"",bordered:!e.$q.dark.isActive},{default:(0,a.w5)((()=>[(0,a._)("table",d,[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.columns,(e=>((0,a.wg)(),(0,a.iD)("th",{key:e.name,style:{"text-align":"left"}},(0,o.zw)(e.label),1)))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.products,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.product_id,onClick:l=>h.onRowClick(e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.columns,(l=>((0,a.wg)(),(0,a.iD)("td",{key:l.name},(0,o.zw)(e[l.field]),1)))),128))],8,c)))),128))])])])),_:1},8,["bordered"]),(0,a.Wm)(_,{modelValue:m.dialog,"onUpdate:modelValue":l[3]||(l[3]=e=>m.dialog=e),position:"bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{width:"100vw",height:"60dvh","border-radius":"40px"},maximized:"",class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Product Details ")])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.columns,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.name},[(0,a._)("strong",null,(0,o.zw)(e.label)+":",1),(0,a.Uk)(" "+(0,o.zw)(m.selectedProduct[e.field]),1)])))),128))])),_:1}),(0,a.Wm)(y,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:"Close",color:"primary",onClick:h.closeDialog},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var m=t(1569);const h={data(){return{products:[],columns:[{name:"product_id",label:"Product ID",align:"left",field:"product_id"},{name:"product_name",label:"Product Name",align:"left",field:"product_name"},{name:"description",label:"Description",align:"left",field:"description"},{name:"quantity",label:"Quantity",align:"left",field:"quantity"},{name:"price",label:"Price",align:"left",field:"price"},{name:"category",label:"Category",align:"left",field:"category"},{name:"status",label:"Status",align:"left",field:"status"},{name:"created_at",label:"Created At",align:"left",field:"created_at"}],dialog:!1,selectedProduct:{},userProfileFetched:!1}},created(){this.fetchUserProfile()},computed:{getBranchId(){return this.userProfileFetched?this.$store.state.userProfile?.branch_id:null}},mounted(){this.userProfileFetched&&this.fetchData()},methods:{fetchUserProfile(){const e=sessionStorage.getItem("token");e?this.$store.dispatch("fetchUserProfile",e).then((()=>{this.userProfileFetched=!0,this.fetchData(),this.pollingInterval=setInterval((()=>{this.fetchData()}),1e3)})).catch((e=>{console.error("Error fetching user profile:",e)})):console.error("Token not available. Unable to fetch user profile.")},fetchData(){const e=this.getBranchId;e?m.api.get(`/branch/inventory/${e}`).then((e=>{this.products=e.data})).catch((e=>{console.error("Error fetching data:",e)})):console.error("Branch ID not available.")},onRowClick(e){this.selectedProduct=e,this.dialog=!0},closeDialog(){this.dialog=!1}}};var p=t(1639),f=t(4458),g=t(6384),b=t(5950),w=t(2074),y=t(3190),_=t(1821),v=t(8879),q=t(9984),k=t.n(q);const D=(0,p.Z)(h,[["render",u]]),F=D;k()(h,"components",{QCard:f.Z,QSelect:g.Z,QTable:b.Z,QDialog:w.Z,QCardSection:y.Z,QCardActions:_.Z,QBtn:v.Z})}}]);